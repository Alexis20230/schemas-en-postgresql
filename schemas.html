<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schemas en PostgreSQL - Gu√≠a Interactiva</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #336791 0%, #1e4a6b 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #336791;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .section p {
            font-size: 1.1em;
            margin-bottom: 15px;
            text-align: justify;
        }

        /* Tarjetas interactivas */
        .card-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .card h3 {
            color: #336791;
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .card p {
            font-size: 1em;
            color: #555;
        }

        /* Cuadros desplegables */
        .accordion {
            margin: 20px 0;
        }

        .accordion-item {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            margin-bottom: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .accordion-item:hover {
            border-color: #667eea;
        }

        .accordion-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            cursor: pointer;
            font-size: 1.3em;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .accordion-header:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }

        .accordion-header::after {
            content: '+';
            font-size: 1.5em;
            transition: transform 0.3s ease;
        }

        .accordion-header.active::after {
            transform: rotate(45deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 20px;
        }

        .accordion-content.active {
            max-height: 1000px;
            padding: 20px;
        }

        .accordion-content p {
            margin-bottom: 10px;
        }

        /* C√≥digo SQL */
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .code-block code {
            color: #a6e22e;
        }

        .keyword {
            color: #f92672;
        }

        .string {
            color: #e6db74;
        }

        .comment {
            color: #75715e;
            font-style: italic;
        }

        /* Diagrama visual */
        .diagram {
            background: #f8f9fa;
            border: 3px solid #667eea;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .schema-box {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            margin: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            min-width: 150px;
        }

        .schema-box:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .schema-box h4 {
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .schema-box p {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .arrow {
            display: inline-block;
            font-size: 2em;
            color: #667eea;
            margin: 0 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        /* Tabla comparativa */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .comparison-table thead {
            background: linear-gradient(135deg, #336791 0%, #1e4a6b 100%);
            color: white;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .comparison-table th {
            font-size: 1.1em;
            font-weight: bold;
        }

        .comparison-table tbody tr {
            transition: background 0.3s ease;
        }

        .comparison-table tbody tr:hover {
            background: #f0f4ff;
        }

        .comparison-table tbody tr:nth-child(even) {
            background: #f8f9fa;
        }

        .comparison-table tbody tr:nth-child(even):hover {
            background: #e8ecff;
        }

        /* Bot√≥n interactivo */
        .interactive-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        .interactive-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .interactive-btn:active {
            transform: translateY(0);
        }

        /* √Årea de resultado */
        .result-area {
            background: #f8f9fa;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            min-height: 100px;
            display: none;
        }

        .result-area.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Footer */
        footer {
            background: #2d2d2d;
            color: white;
            text-align: center;
            padding: 30px;
            margin-top: 40px;
        }

        footer p {
            margin: 5px 0;
        }

        footer a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: #764ba2;
        }

        /* Responsive */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }

            .section h2 {
                font-size: 1.5em;
            }

            .card-container {
                grid-template-columns: 1fr;
            }

            .schema-box {
                display: block;
                margin: 10px auto;
            }

            .arrow {
                display: block;
                margin: 10px auto;
                transform: rotate(90deg);
            }
        }

        /* Highlight */
        .highlight {
            background: linear-gradient(120deg, #f6d365 0%, #fda085 100%);
            padding: 2px 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        /* Nota especial */
        .note {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .note strong {
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üêò Schemas en PostgreSQL</h1>
            <p>Gu√≠a Interactiva Completa sobre Organizaci√≥n de Bases de Datos</p>
        </header>

        <div class="content">
            <!-- Secci√≥n 1: ¬øQu√© es un Schema? -->
            <div class="section">
                <h2>¬øQu√© es un Schema?</h2>
                <p>
                    Un <span class="highlight">schema</span> en PostgreSQL es un contenedor l√≥gico que permite organizar y agrupar objetos de base de datos dentro de una √∫nica base de datos. Estos objetos incluyen tablas, vistas, funciones, tipos de datos, √≠ndices, secuencias y operadores. Los schemas funcionan de manera similar a los directorios o carpetas en un sistema operativo, proporcionando una estructura jer√°rquica para organizar los datos, aunque con la diferencia de que los schemas no pueden anidarse.
                </p>
                <p>
                    Una base de datos PostgreSQL puede contener uno o m√°s schemas, y cada schema proporciona un espacio de nombres independiente. Esto significa que dos objetos del mismo tipo pueden tener el mismo nombre siempre que est√©n en schemas diferentes. Por ejemplo, <code>schema1.empleados</code> y <code>schema2.empleados</code> son dos tablas completamente distintas que coexisten sin conflicto.
                </p>

                <div class="diagram">
                    <h3 style="color: #336791; margin-bottom: 20px;">Estructura de una Base de Datos PostgreSQL</h3>
                    <div class="schema-box">
                        <h4>Base de Datos</h4>
                        <p>mi_empresa</p>
                    </div>
                    <div class="arrow">‚Üì</div>
                    <div style="display: flex; justify-content: center; flex-wrap: wrap;">
                        <div class="schema-box">
                            <h4>Schema: public</h4>
                            <p>Tablas, Vistas, Funciones</p>
                        </div>
                        <div class="schema-box">
                            <h4>Schema: ventas</h4>
                            <p>Tablas, Vistas, Funciones</p>
                        </div>
                        <div class="schema-box">
                            <h4>Schema: rrhh</h4>
                            <p>Tablas, Vistas, Funciones</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n 2: Prop√≥sitos de los Schemas -->
            <div class="section">
                <h2>Prop√≥sitos y Beneficios de los Schemas</h2>
                <div class="card-container">
                    <div class="card">
                        <h3>üìÅ Organizaci√≥n</h3>
                        <p>Permiten agrupar objetos relacionados l√≥gicamente, facilitando la gesti√≥n y el mantenimiento de bases de datos complejas con cientos o miles de tablas.</p>
                    </div>
                    <div class="card">
                        <h3>üë• Multiusuario</h3>
                        <p>Facilitan que m√∫ltiples usuarios o equipos trabajen en la misma base de datos sin interferir entre s√≠, cada uno con su propio espacio de trabajo.</p>
                    </div>
                    <div class="card">
                        <h3>üîí Seguridad</h3>
                        <p>Permiten asignar privilegios espec√≠ficos a nivel de schema, controlando qui√©n puede acceder, crear o modificar objetos dentro de cada schema.</p>
                    </div>
                    <div class="card">
                        <h3>üö´ Prevenci√≥n de Colisiones</h3>
                        <p>Evitan conflictos de nombres al permitir que objetos con el mismo nombre coexistan en diferentes schemas dentro de la misma base de datos.</p>
                    </div>
                    <div class="card">
                        <h3>üîå Aplicaciones de Terceros</h3>
                        <p>Permiten instalar aplicaciones externas en schemas separados, evitando que sus objetos interfieran con los objetos existentes en la base de datos.</p>
                    </div>
                    <div class="card">
                        <h3>üè¢ Multitenencia</h3>
                        <p>Facilitan arquitecturas multitenencia donde cada cliente o inquilino tiene su propio schema con una estructura de tablas id√©ntica pero datos separados.</p>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n 3: Acorde√≥n Interactivo -->
            <div class="section">
                <h2>Conceptos Clave</h2>
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header">
                            El Schema "public"
                        </div>
                        <div class="accordion-content">
                            <p>
                                Cada nueva base de datos en PostgreSQL contiene autom√°ticamente un schema llamado <strong>"public"</strong>. Este es el schema por defecto donde se crean los objetos cuando no se especifica expl√≠citamente un schema.
                            </p>
                            <p>
                                Por ejemplo, las siguientes dos sentencias son equivalentes:
                            </p>
                            <div class="code-block">
<span class="keyword">CREATE TABLE</span> productos (id <span class="keyword">INT</span>, nombre <span class="keyword">VARCHAR</span>);
<span class="comment">-- Es equivalente a:</span>
<span class="keyword">CREATE TABLE</span> public.productos (id <span class="keyword">INT</span>, nombre <span class="keyword">VARCHAR</span>);
                            </div>
                            <p>
                                El schema "public" puede ser eliminado si no se necesita, aunque es una pr√°ctica com√∫n mantenerlo para objetos compartidos o de uso general.
                            </p>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header">
                            Ruta de B√∫squeda (search_path)
                        </div>
                        <div class="accordion-content">
                            <p>
                                Cuando se hace referencia a un objeto sin especificar su schema (nombre no calificado), PostgreSQL utiliza la <strong>ruta de b√∫squeda de schemas</strong> (search_path) para encontrarlo. Esta ruta es una lista ordenada de schemas en los que el sistema buscar√° secuencialmente.
                            </p>
                            <p>
                                Para ver la ruta de b√∫squeda actual:
                            </p>
                            <div class="code-block">
<span class="keyword">SHOW</span> search_path;
<span class="comment">-- Resultado t√≠pico: "$user", public</span>
                            </div>
                            <p>
                                Para modificar la ruta de b√∫squeda:
                            </p>
                            <div class="code-block">
<span class="keyword">SET</span> search_path <span class="keyword">TO</span> ventas, public;
<span class="comment">-- Ahora "ventas" es el primer schema en la b√∫squeda</span>
                            </div>
                            <p>
                                El primer schema en la ruta de b√∫squeda es el <strong>schema actual</strong>, donde se crear√°n nuevos objetos por defecto.
                            </p>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header">
                            Nombres Calificados vs. No Calificados
                        </div>
                        <div class="accordion-content">
                            <p>
                                Un <strong>nombre calificado</strong> especifica expl√≠citamente el schema al que pertenece un objeto, utilizando la sintaxis <code>schema.objeto</code>. Por ejemplo: <code>ventas.clientes</code>.
                            </p>
                            <p>
                                Un <strong>nombre no calificado</strong> solo especifica el nombre del objeto, sin el schema. PostgreSQL utilizar√° el search_path para encontrarlo. Por ejemplo: <code>clientes</code>.
                            </p>
                            <div class="code-block">
<span class="comment">-- Nombre calificado (expl√≠cito)</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> ventas.clientes;

<span class="comment">-- Nombre no calificado (depende del search_path)</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> clientes;
                            </div>
                            <p>
                                Los nombres calificados son m√°s expl√≠citos y evitan ambig√ºedades, mientras que los nombres no calificados son m√°s concisos pero dependen de la configuraci√≥n del search_path.
                            </p>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header">
                            Creaci√≥n y Gesti√≥n de Schemas
                        </div>
                        <div class="accordion-content">
                            <p>
                                Para crear un nuevo schema:
                            </p>
                            <div class="code-block">
<span class="keyword">CREATE SCHEMA</span> ventas;
                            </div>
                            <p>
                                Para crear un schema con un propietario espec√≠fico:
                            </p>
                            <div class="code-block">
<span class="keyword">CREATE SCHEMA</span> ventas <span class="keyword">AUTHORIZATION</span> usuario_ventas;
                            </div>
                            <p>
                                Para eliminar un schema vac√≠o:
                            </p>
                            <div class="code-block">
<span class="keyword">DROP SCHEMA</span> ventas;
                            </div>
                            <p>
                                Para eliminar un schema y todos sus objetos:
                            </p>
                            <div class="code-block">
<span class="keyword">DROP SCHEMA</span> ventas <span class="keyword">CASCADE</span>;
                            </div>
                            <div class="note">
                                <strong>‚ö†Ô∏è Precauci√≥n:</strong> El comando DROP SCHEMA CASCADE eliminar√° permanentemente todos los objetos contenidos en el schema. √öselo con cuidado.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n 4: Comunicaci√≥n entre Schemas -->
            <div class="section">
                <h2>¬øSe Pueden Comunicar los Schemas?</h2>
                <p>
                    La respuesta es <strong>¬°S√ç!</strong> Los schemas en PostgreSQL no est√°n r√≠gidamente separados. Un usuario puede acceder a objetos en cualquier schema de la base de datos a la que est√° conectado, siempre que tenga los privilegios adecuados para hacerlo.
                </p>
                <p>
                    Para referenciar un objeto en un schema diferente al actual, simplemente se utiliza un <span class="highlight">nombre calificado</span> que incluye el nombre del schema seguido de un punto y el nombre del objeto. Esta capacidad permite que las consultas, funciones y procedimientos accedan a datos distribuidos en m√∫ltiples schemas dentro de la misma base de datos.
                </p>

                <div class="note">
                    <strong>üí° Importante:</strong> Para que un usuario pueda acceder a objetos en diferentes schemas, debe tener los privilegios <code>USAGE</code> en el schema y los privilegios apropiados (como <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>) en los objetos espec√≠ficos.
                </div>

                <h3 style="color: #336791; margin-top: 30px; margin-bottom: 15px;">Ejemplo de Acceso entre Schemas:</h3>
                <div class="code-block">
<span class="comment">-- Seleccionar datos de una tabla en otro schema</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> ventas.clientes;

<span class="comment">-- Insertar datos en una tabla de otro schema</span>
<span class="keyword">INSERT INTO</span> rrhh.empleados (nombre, cargo)
<span class="keyword">VALUES</span> (<span class="string">'Juan P√©rez'</span>, <span class="string">'Desarrollador'</span>);

<span class="comment">-- Actualizar datos en otro schema</span>
<span class="keyword">UPDATE</span> inventario.productos
<span class="keyword">SET</span> precio = precio * 1.10
<span class="keyword">WHERE</span> categoria = <span class="string">'Electr√≥nica'</span>;
                </div>
            </div>

            <!-- Secci√≥n 5: Visualizaci√≥n de Tablas entre Schemas -->
            <div class="section">
                <h2>Visualizaci√≥n y Consultas entre Schemas</h2>
                <p>
                    Una de las capacidades m√°s poderosas de PostgreSQL es la posibilidad de realizar consultas que involucren tablas de m√∫ltiples schemas. Esto es especialmente √∫til en aplicaciones empresariales donde los datos est√°n organizados l√≥gicamente en diferentes schemas pero necesitan ser relacionados o combinados para an√°lisis y reportes.
                </p>

                <h3 style="color: #336791; margin-top: 30px; margin-bottom: 15px;">Uniones (JOINs) entre Schemas</h3>
                <p>
                    Es perfectamente posible realizar uniones (JOINs) entre tablas que residen en diferentes schemas dentro de la misma base de datos. Para ello, simplemente se califican los nombres de las tablas con sus respectivos schemas en la consulta.
                </p>

                <div class="code-block">
<span class="comment">-- JOIN entre tablas de diferentes schemas</span>
<span class="keyword">SELECT</span>
    v.cliente_id,
    v.fecha_venta,
    v.monto_total,
    c.nombre <span class="keyword">AS</span> nombre_cliente,
    c.email
<span class="keyword">FROM</span>
    ventas.transacciones <span class="keyword">AS</span> v
<span class="keyword">INNER JOIN</span>
    clientes.registro <span class="keyword">AS</span> c
    <span class="keyword">ON</span> v.cliente_id = c.id
<span class="keyword">WHERE</span>
    v.fecha_venta >= <span class="string">'2025-01-01'</span>;
                </div>

                <h3 style="color: #336791; margin-top: 30px; margin-bottom: 15px;">Ejemplo Complejo: M√∫ltiples Schemas</h3>
                <div class="code-block">
<span class="comment">-- Consulta que involucra tres schemas diferentes</span>
<span class="keyword">SELECT</span>
    e.nombre <span class="keyword">AS</span> empleado,
    e.departamento,
    v.producto_id,
    p.nombre_producto,
    v.cantidad,
    v.precio_unitario,
    (v.cantidad * v.precio_unitario) <span class="keyword">AS</span> total_venta
<span class="keyword">FROM</span>
    rrhh.empleados <span class="keyword">AS</span> e
<span class="keyword">INNER JOIN</span>
    ventas.transacciones <span class="keyword">AS</span> v
    <span class="keyword">ON</span> e.id = v.vendedor_id
<span class="keyword">INNER JOIN</span>
    inventario.productos <span class="keyword">AS</span> p
    <span class="keyword">ON</span> v.producto_id = p.id
<span class="keyword">WHERE</span>
    v.fecha_venta <span class="keyword">BETWEEN</span> <span class="string">'2025-01-01'</span> <span class="keyword">AND</span> <span class="string">'2025-12-31'</span>
<span class="keyword">ORDER BY</span>
    total_venta <span class="keyword">DESC</span>;
                </div>

                <h3 style="color: #336791; margin-top: 30px; margin-bottom: 15px;">Vistas que Combinan Schemas</h3>
                <p>
                    Tambi√©n es posible crear vistas que combinen datos de m√∫ltiples schemas, proporcionando una capa de abstracci√≥n que simplifica las consultas futuras:
                </p>
                <div class="code-block">
<span class="comment">-- Crear una vista que combina datos de m√∫ltiples schemas</span>
<span class="keyword">CREATE VIEW</span> reportes.ventas_completas <span class="keyword">AS</span>
<span class="keyword">SELECT</span>
    v.id <span class="keyword">AS</span> venta_id,
    v.fecha_venta,
    c.nombre <span class="keyword">AS</span> cliente,
    p.nombre_producto,
    v.cantidad,
    v.precio_unitario,
    e.nombre <span class="keyword">AS</span> vendedor
<span class="keyword">FROM</span>
    ventas.transacciones v
<span class="keyword">JOIN</span> clientes.registro c <span class="keyword">ON</span> v.cliente_id = c.id
<span class="keyword">JOIN</span> inventario.productos p <span class="keyword">ON</span> v.producto_id = p.id
<span class="keyword">JOIN</span> rrhh.empleados e <span class="keyword">ON</span> v.vendedor_id = e.id;

<span class="comment">-- Ahora se puede consultar la vista f√°cilmente</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> reportes.ventas_completas
<span class="keyword">WHERE</span> fecha_venta >= <span class="string">'2025-01-01'</span>;
                </div>
            </div>

            <!-- Secci√≥n 6: Tabla Comparativa -->
            <div class="section">
                <h2>Comparaci√≥n: Schemas vs. Bases de Datos</h2>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Caracter√≠stica</th>
                            <th>Schemas</th>
                            <th>Bases de Datos</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Aislamiento</strong></td>
                            <td>No est√°n r√≠gidamente separados. Los objetos pueden comunicarse f√°cilmente.</td>
                            <td>Completamente aisladas. No se pueden hacer JOINs directos entre bases de datos.</td>
                        </tr>
                        <tr>
                            <td><strong>Conexi√≥n</strong></td>
                            <td>Un usuario conectado a una base de datos puede acceder a todos los schemas (con privilegios).</td>
                            <td>Se requiere una conexi√≥n separada para cada base de datos.</td>
                        </tr>
                        <tr>
                            <td><strong>Transacciones</strong></td>
                            <td>Las transacciones pueden abarcar m√∫ltiples schemas.</td>
                            <td>Las transacciones no pueden abarcar m√∫ltiples bases de datos.</td>
                        </tr>
                        <tr>
                            <td><strong>Prop√≥sito</strong></td>
                            <td>Organizaci√≥n l√≥gica dentro de una base de datos.</td>
                            <td>Separaci√≥n completa de aplicaciones o proyectos.</td>
                        </tr>
                        <tr>
                            <td><strong>Consultas cruzadas</strong></td>
                            <td>F√°ciles y directas usando nombres calificados.</td>
                            <td>Requieren extensiones como dblink o foreign data wrappers.</td>
                        </tr>
                        <tr>
                            <td><strong>Gesti√≥n de privilegios</strong></td>
                            <td>Privilegios a nivel de schema y objeto.</td>
                            <td>Privilegios a nivel de base de datos y objeto.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Secci√≥n 7: Demostraci√≥n Interactiva -->
            <div class="section">
                <h2>Demostraci√≥n Interactiva</h2>
                <p>Haz clic en los botones para ver ejemplos de consultas SQL entre diferentes schemas:</p>
                
                <div style="text-align: center;">
                    <button class="interactive-btn" onclick="showExample('example1')">
                        Consulta Simple
                    </button>
                    <button class="interactive-btn" onclick="showExample('example2')">
                        JOIN entre Schemas
                    </button>
                    <button class="interactive-btn" onclick="showExample('example3')">
                        Consulta Compleja
                    </button>
                    <button class="interactive-btn" onclick="showExample('example4')">
                        Crear Vista
                    </button>
                </div>

                <div id="example1" class="result-area">
                    <h3 style="color: #336791;">Consulta Simple entre Schemas</h3>
                    <div class="code-block">
<span class="comment">-- Seleccionar todos los clientes del schema 'ventas'</span>
<span class="keyword">SELECT</span> 
    cliente_id,
    nombre,
    email,
    telefono
<span class="keyword">FROM</span> 
    ventas.clientes
<span class="keyword">WHERE</span> 
    activo = <span class="keyword">true</span>
<span class="keyword">ORDER BY</span> 
    nombre;
                    </div>
                    <p><strong>Resultado:</strong> Esta consulta accede directamente a la tabla 'clientes' en el schema 'ventas' usando un nombre calificado.</p>
                </div>

                <div id="example2" class="result-area">
                    <h3 style="color: #336791;">JOIN entre Schemas</h3>
                    <div class="code-block">
<span class="comment">-- Unir pedidos con informaci√≥n de clientes de diferentes schemas</span>
<span class="keyword">SELECT</span> 
    p.pedido_id,
    p.fecha_pedido,
    p.monto_total,
    c.nombre <span class="keyword">AS</span> nombre_cliente,
    c.ciudad
<span class="keyword">FROM</span> 
    ventas.pedidos <span class="keyword">AS</span> p
<span class="keyword">INNER JOIN</span> 
    clientes.registro <span class="keyword">AS</span> c
    <span class="keyword">ON</span> p.cliente_id = c.cliente_id
<span class="keyword">WHERE</span> 
    p.fecha_pedido >= <span class="string">'2025-01-01'</span>
<span class="keyword">ORDER BY</span> 
    p.fecha_pedido <span class="keyword">DESC</span>;
                    </div>
                    <p><strong>Resultado:</strong> Esta consulta combina datos de la tabla 'pedidos' (schema ventas) con la tabla 'registro' (schema clientes) mediante un INNER JOIN.</p>
                </div>

                <div id="example3" class="result-area">
                    <h3 style="color: #336791;">Consulta Compleja con M√∫ltiples Schemas</h3>
                    <div class="code-block">
<span class="comment">-- An√°lisis de ventas con informaci√≥n de empleados, productos y clientes</span>
<span class="keyword">SELECT</span> 
    e.nombre <span class="keyword">AS</span> vendedor,
    e.departamento,
    <span class="keyword">COUNT</span>(v.venta_id) <span class="keyword">AS</span> total_ventas,
    <span class="keyword">SUM</span>(v.cantidad * v.precio_unitario) <span class="keyword">AS</span> ingresos_totales,
    <span class="keyword">AVG</span>(v.cantidad * v.precio_unitario) <span class="keyword">AS</span> venta_promedio,
    p.categoria <span class="keyword">AS</span> categoria_producto
<span class="keyword">FROM</span> 
    rrhh.empleados <span class="keyword">AS</span> e
<span class="keyword">INNER JOIN</span> 
    ventas.transacciones <span class="keyword">AS</span> v
    <span class="keyword">ON</span> e.empleado_id = v.vendedor_id
<span class="keyword">INNER JOIN</span> 
    inventario.productos <span class="keyword">AS</span> p
    <span class="keyword">ON</span> v.producto_id = p.producto_id
<span class="keyword">WHERE</span> 
    v.fecha_venta <span class="keyword">BETWEEN</span> <span class="string">'2025-01-01'</span> <span class="keyword">AND</span> <span class="string">'2025-12-31'</span>
<span class="keyword">GROUP BY</span> 
    e.nombre, e.departamento, p.categoria
<span class="keyword">HAVING</span> 
    <span class="keyword">SUM</span>(v.cantidad * v.precio_unitario) > 10000
<span class="keyword">ORDER BY</span> 
    ingresos_totales <span class="keyword">DESC</span>;
                    </div>
                    <p><strong>Resultado:</strong> Esta consulta avanzada combina datos de tres schemas diferentes (rrhh, ventas, inventario) para generar un reporte de an√°lisis de ventas por vendedor y categor√≠a de producto.</p>
                </div>

                <div id="example4" class="result-area">
                    <h3 style="color: #336791;">Crear Vista que Combina Schemas</h3>
                    <div class="code-block">
<span class="comment">-- Crear una vista en el schema 'reportes' que combina datos de m√∫ltiples schemas</span>
<span class="keyword">CREATE SCHEMA IF NOT EXISTS</span> reportes;

<span class="keyword">CREATE OR REPLACE VIEW</span> reportes.dashboard_ventas <span class="keyword">AS</span>
<span class="keyword">SELECT</span> 
    v.venta_id,
    v.fecha_venta,
    c.nombre <span class="keyword">AS</span> cliente,
    c.email <span class="keyword">AS</span> email_cliente,
    p.nombre_producto,
    p.categoria,
    v.cantidad,
    v.precio_unitario,
    (v.cantidad * v.precio_unitario) <span class="keyword">AS</span> total,
    e.nombre <span class="keyword">AS</span> vendedor,
    e.departamento
<span class="keyword">FROM</span> 
    ventas.transacciones v
<span class="keyword">JOIN</span> clientes.registro c <span class="keyword">ON</span> v.cliente_id = c.cliente_id
<span class="keyword">JOIN</span> inventario.productos p <span class="keyword">ON</span> v.producto_id = p.producto_id
<span class="keyword">JOIN</span> rrhh.empleados e <span class="keyword">ON</span> v.vendedor_id = e.empleado_id;

<span class="comment">-- Ahora puedes consultar la vista f√°cilmente</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> reportes.dashboard_ventas
<span class="keyword">WHERE</span> fecha_venta >= <span class="string">'2025-01-01'</span>
<span class="keyword">ORDER BY</span> total <span class="keyword">DESC</span>
<span class="keyword">LIMIT</span> 10;
                    </div>
                    <p><strong>Resultado:</strong> Esta vista simplifica el acceso a datos combinados de m√∫ltiples schemas, proporcionando una interfaz unificada para consultas de reportes.</p>
                </div>
            </div>

            <!-- Secci√≥n 8: Mejores Pr√°cticas -->
            <div class="section">
                <h2>Mejores Pr√°cticas</h2>
                <div class="card-container">
                    <div class="card">
                        <h3>‚úÖ Nombrado Consistente</h3>
                        <p>Use nombres descriptivos y consistentes para los schemas que reflejen su prop√≥sito (ej: ventas, rrhh, inventario, reportes).</p>
                    </div>
                    <div class="card">
                        <h3>‚úÖ Seguridad por Capas</h3>
                        <p>Utilice schemas para implementar seguridad a nivel l√≥gico, asignando privilegios espec√≠ficos a cada schema seg√∫n las necesidades.</p>
                    </div>
                    <div class="card">
                        <h3>‚úÖ Documentaci√≥n</h3>
                        <p>Documente la estructura de schemas y su prop√≥sito para facilitar el mantenimiento y la colaboraci√≥n en equipo.</p>
                    </div>
                    <div class="card">
                        <h3>‚úÖ Evite Dependencias Circulares</h3>
                        <p>Dise√±e la arquitectura de schemas para evitar dependencias circulares que puedan complicar el mantenimiento.</p>
                    </div>
                    <div class="card">
                        <h3>‚úÖ Use Vistas para Abstracci√≥n</h3>
                        <p>Cree vistas que combinen datos de m√∫ltiples schemas para simplificar consultas complejas y proporcionar una interfaz unificada.</p>
                    </div>
                    <div class="card">
                        <h3>‚úÖ Gesti√≥n de search_path</h3>
                        <p>Configure el search_path apropiadamente para cada aplicaci√≥n o usuario, equilibrando conveniencia y seguridad.</p>
                    </div>
                </div>
            </div>

        </div>

        <footer>
            <p><strong>Schemas en PostgreSQL</strong> - Gu√≠a Interactiva</p>
            <p>Desarrollado con ‚ù§Ô∏è para la comunidad PostgreSQL</p>
            <p>Documentaci√≥n oficial: <a href="https://www.postgresql.org/docs/current/ddl-schemas.html" target="_blank">PostgreSQL Schemas Documentation</a></p>
            <p>&copy; 2025 - Todos los derechos reservados</p>
        </footer>
    </div>

    <script>
        // Funci√≥n para acordeones
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', function() {
                this.classList.toggle('active');
                const content = this.nextElementSibling;
                content.classList.toggle('active');
            });
        });

        // Funci√≥n para mostrar ejemplos
        function showExample(exampleId) {
            // Ocultar todos los ejemplos
            document.querySelectorAll('.result-area').forEach(area => {
                area.classList.remove('active');
            });
            
            // Mostrar el ejemplo seleccionado
            const selectedExample = document.getElementById(exampleId);
            if (selectedExample) {
                selectedExample.classList.add('active');
                // Scroll suave al ejemplo
                selectedExample.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        // Efecto de hover en las tarjetas
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-10px) scale(1.02)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });

        // Animaci√≥n de entrada para las secciones
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(20px)';
            section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(section);
        });
    </script>
</body>
</html>
